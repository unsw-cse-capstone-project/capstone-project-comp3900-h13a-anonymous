{% extends "sidebar.html" %}
{% load static %}

{% block content %}
<h1>
    My Watch List
</h1>

{% for key, value in errors.items %}
<center><h5 style="color:#FF0000;">{{value}}</h5></center>
{% endfor %}

<table style="width:100%" class="table">
    <tr>
    <th>Stock Code</th>
    <th>Stock Name</th>
    <th>Date Added</th>
    <th>Current Price</th>
    <th>Change Since Last Closing</th>
    <th>Watch Prices </th>
    <th></th>

    </tr>
    {% for w in wlist %}
    <tr>
    <td>{{w.code}}</td>
    <td> <a href="/stock/{{w.code}}"> {{w.name}} </a> </td> 
    <td>{{w.date}}</td>
    <td>{{w.current}}</td>
    <td>{{w.change}}</td>
    <td> 
        <!-- <th>
            {% for price in w.prices %}
                <tr> <td>{{price}} </td> </tr>
            {% endfor %}
        </th> -->
        {% for alert in w.alerts %}
            {{alert.watchprice}} <a href="/remove_watchprice/{{alert}}" class="btn btn-info">Remove </a>
        {% endfor %}
    </td>
    <td> <a href="/buy/{{w.code}}" class="btn btn-info">Buy</a> <a href="/set_watchprice/{{w.code}}" class="btn btn-info">Set Watchprice </a>  <a href="/remove_watchlist/{{w.code}}" class="btn btn-info">Remove from watchlist</a></td>
    </tr>
    {% endfor %}
</table>

{% endblock %}